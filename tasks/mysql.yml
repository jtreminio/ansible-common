---

- set_fact:
    mysql_root_password: "{{ mysql.settings.root_password }}"
    mysql_user_password: "{{ mysql.settings.root_password }}"
    mysql_root_password_update: yes
    mysql_user_password_update: yes
    mysql_databases: "{{ mysql.databases }}"

- include_tasks: mysql/package/debian-mysql.yml

- include_tasks: mysql/user.yml
  loop_control:
    loop_var: l_mysql_user
  vars:
    mysql_user: "{{ l_mysql_user }}"
  with_items: "{{ mysql.users }}"

- include_role:
    name: geerlingguy.mysql

# todo: configure centos support
